<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos JavaScript</title>
</head>

<body>
    <div>
        <form>
            <input id="nombre" type="text" value="mundo" >
            <button type="submit" class="saludar">Saluda</button>
            <output onclick="alert('mal')"></output>
        </form>
    </div>

    <script src="js/demos.js"></script>
    <script>
        const btn = document.querySelector('.saludar')
        function saludar(ev) {
            const entrada = document.querySelector('#nombre')
            const salida = document.querySelector('output')
            salida.innerHTML = `Hola ${entrada.value}`
            salida.style='color: blue'
            btn.textContent = 'Despide'
            entrada.focus()
            btn.removeEventListener('click', saludar)
            btn.addEventListener('click', despedir)
            ev.preventDefault();
            entrada.hidden = !entrada.hidden

        }
        function despedir(ev) {
            const entrada = document.querySelector('#nombre')
            const salida = document.querySelector('output')
            salida.innerHTML = `Adios ${entrada.value}`
            salida.style='color: red'
            btn.textContent = 'Saluda'
            btn.removeEventListener('click', despedir)
            btn.addEventListener('click', saludar)
            ev.preventDefault();
            entrada.focus()
            entrada.hidden = !entrada.hidden

        }

        btn.addEventListener('click', saludar)
        btn.addEventListener('click', (ev) => { 
            console.log('pulsa el botón en ' + ev.target.type)
            //ev.stopPropagation()
        } )
        document.querySelector('form').addEventListener('click', (ev) => { 
            console.log(`pulsa el botón en (${ev.clientX},${ev.clientY})`)
        } )
        // 'use strict'
        // const TAMAÑO_MAXIMO = 10
        //     (function () {
        //         let noSeaGlobal = 0
        //         for (let noSeaGlobal = 0; noSeaGlobal < TAMAÑO_MAXIMO; noSeaGlobal++) {

        //         }
        //         const id = noSeaGlobal + 1;
        //         // ...
        //         id = 0
        //     })()

        // c = '3'
        // function kk() {
        //     var a = 1
        //     let b = 2
        //     if (true) {
        //         let b = 2
        //         var a = 3
        //     }
        //     c = a + b;
        // }
        // let a = '1'
        // let b = 2
        // imprimir = 5
        // b = a = 3
        // rslt = '' + (a = 3) + b * imprimir
        // a = a + 3
        // a = b++
        // a = cod && "es"
        // if (typeof (a) === "string" && a instanceof String) { }
        // //rslt = isNaN(+a)

        // if (typeof (a) === "string" && a instanceof String) {
        //     b = 5;
        //     c = 4;
        //     if (a > 8) {

        //     }
        // } else if (a < 0)
        //     c = 3
        // else
        //     c = 0

        // let tab = new Array()
        // tab = [1, 2, 3]
        // let [a, b, c, ...resto] = tab
        // [a, b] = [b, a]
        // a = tab[0]
        // tab[0] = 7
        // tab[3] = 5
        // tab[7] = 5
        // tab[5] = [3, 2, 1]
        // tab[5] = ''
        // for(let i of tab) {
        //     console.log(i)
        // }
        // let rslt = 0
        // // for(let i = 0; i < tab.length; i++) {
        // //     rslt += tab[i]
        // // }
        // for (let i of tab) {
        //     rslt += tab[i]
        // }
        // b=-1
        // switch (a) {
        //     case 4:
        //         b = 1
        //     case 1:
        //     case 2:
        //     case 3:
        //         c = 1
        //         break
        //     case 5:
        //         c = 2
        //         break
        //     default:
        //         b = 0
        //         c = 0
        //         break
        // }
        // fn(...tab)
        // while(true) {
        //     // ...
        //     if(a<0) break;
        //     // ...
        //     if(b>0) break
        //     // ...
        //     continue;
        //     algo=0

        // }
        // fn = (a, b, c) => a * b * c
        // fn = function (a, b, c) { return a * b * c }
        // // function suma(){ return "cadena" }
        // let op = [ suma, resta, 1, 2]
        // let ch = '/'
        // // ch = '/\'); alert(\'Codigo malicioso'
        // op[1] = eval(`calcula('${ch}')`)
        let o = new Object() // {}
        o.nombre = 'Pepito'
        o['apellidos'] = 'Grillo'
        // let cmp = 'apellidos'
        // o[cmp] = 'kk'
        o.nombreCompleto = () => `${this.nombre} ${this.apellidos}`
        o.nombreCompleto.bind(o)
        o.nombreCompleto = function () {
            return `${this.nombre} ${this.apellidos}`
        }
        o = {
            nombre: 'Carmelo',
            apellidos: 'Coton',
            nombreCompleto: function () {
                return `${this.nombre} ${this.apellidos}`
            },
        }
        function Persona(nombre, apellidos, laEdad = 99) {
            let vm = this
            let edad = laEdad
            let separador = '-'
            this.nombre = nombre
            this.apellidos = apellidos
            this.nombreCompleto = function (tratamiento = 'Sr.') {
                return `${tratamiento} ${vm.nombre}${separador}${vm.apellidos}`
            }
            this.Edad = function () {
                if (arguments.length === 1) {
                    if (arguments[0] < 0)
                        throw new Error('No ha nacido')
                    edad = arguments[0]
                } else
                    return edad
            }
        }

        class Persona2 {
            constructor(nombre, apellidos) {
                this.nombre = nombre
                this.apellidos = apellidos
            }
            nombreCompleto(tratamiento = 'Sr.') {
                return `${tratamiento} ${this.nombre} ${this.apellidos}`
            }
            get Edad() { return this._edad; }
            set Edad(value) {
                if (value < 0)
                    throw new Error('No ha nacido') 
                this._edad = value; 
            }
        }
        console.log(typeof(Persona), typeof(Persona2))
        let o3 = new Persona2('Pepito', 'Grillo')
        o3.Edad = 99
        console.log(o3)
        o3._edad = -10
        console.log(o3.Edad)
        // Persona.prototype.nombreCompleto = function (tratamiento = 'Sr.') {
        //     return `${tratamiento} ${this.nombre} ${this.apellidos}`
        // }
        const nombreCompleto = function (tratamiento = 'Sr.') {
            return `${tratamiento} ${this.nombre} ${this.apellidos}`
        }
        let o1 = new Persona('Pepito', 'Grillo')
        let o2 = new Persona('Carmelo', 'Coton')
        o1.nombre = 0
        o1.edad = 'kk'
        console.log(o1.Edad(), o1.edad)
        o1.Edad(66)
        console.log(o1.Edad(), o1.edad)
        // o1.nombreCompleto = function () {
        //     return `${this.apellidos}, ${this.nombre}`
        // }
        // console.log(o1.nombreCompleto())
        // console.log(o2.nombreCompleto())
        // Persona.prototype.nombreCompleto = function () {
        //     return `${this.apellidos}, ${this.nombre}`
        // }
        console.log(o1)
        console.log(o1.nombreCompleto())
        console.log(o2.nombreCompleto.apply(o1, ['Don', 1, 2]))
        nombreCompleto.bind(o1)
        console.log(nombreCompleto('Don'))
        let cad = JSON.stringify(o1)
        console.log(cad)
        cad = '{"nombre":"Hola","apellidos":"Mudo","edad":"55"}'
        let objeto = JSON.parse(cad)
        objeto.nombre = objeto.nombre.toUpperCase()
        console.log(objeto)

    </script>
    <script>

        // console.log(eval('suma(3,5)-2*5'))
        // console.log(op[1](op[2],op[3]))
        // try {
        //     console.log(calc(4, 2, '%'))
        // } catch (err) {
        //     console.log(`Error: ${err.message}`)
        // }
        // console.log(dobla(4, 2, resta))
        // console.log(dobla(4, 2, (a, b) => a * b))
    </script>
</body>

</html>